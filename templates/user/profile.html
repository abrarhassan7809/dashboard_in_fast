{% extends "base.html" %}

{% block body %}
    <div class="container-fluid px-2 px-md-4">
      <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');">
        <span class="mask  bg-gradient-primary  opacity-6"></span>
      </div>
      <div class="card card-body mx-3 mx-md-4 mt-n6">
        {% if success %}
          <div style="color: white;" class="col-md-12 alert alert-success alert-dismissible mx-auto" role="alert">
            {{ success }}
            <span style="float: right; cursor: pointer; font-size: 20px;" aria-hidden="true" onclick="this.parentElement.style.display='none';">&times;</span>
          </div>
        {% endif %}
        <div class="row gx-4 mb-2">
          {% if user_data %}
          <div class="col-auto my-auto">
            <div class="h-100">
              <img src="/static/img/bruce-mars.jpg" alt="profile_image" class="w-50 border-radius-lg shadow-sm">
              <h5 class="mb-1 mt-3">Welcome</h5>
              <p class="mb-0 font-weight-normal text-sm">{{user_data.first_name}} {{user_data.last_name}}</p>
            </div>
          </div>
          <div class="col-lg-5 col-md-5 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
            <div class="nav-wrapper position-relative end-0">
              <form role="form" method="post" action="/update_user/{{user_data.id}}/">
                <h4 class="mt-2" style="color: #e91e63;">Update Profile</h4>
                <div class="input-group input-group-outline mb-3">
                  <input type="text" name="first_name" placeholder="First Name" value="{{user_data.first_name}}" class="form-control">
                </div>
                <div class="input-group input-group-outline mb-3">
                  <input type="text" name="last_name" placeholder="Last Name" value="{{user_data.last_name}}" class="form-control">
                </div>
                <div class="input-group input-group-outline mb-3">
                  <input type="email" name="email" placeholder="Email" value="{{user_data.email}}" class="form-control">
                </div>
                <div class="input-group input-group-outline mb-3">
                  <input type="password" name="password" placeholder="New Password" class="form-control">
                </div>
                <div class="input-group input-group-outline mb-3">
                  <input type="password" name="confirm_password" placeholder="Confirm Password" class="form-control">
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0">Update</button>
                </div>
              </form>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

  <!--   Core JS Files   -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var errorAlerts = document.querySelectorAll(".alert-danger");
      var successAlerts = document.querySelectorAll(".alert-success");

      errorAlerts.forEach(function (errorAlert) {
          setTimeout(function () {
              errorAlert.style.display = "none";
          }, 2000);
      });

      successAlerts.forEach(function (successAlert) {
          setTimeout(function () {
              successAlert.style.display = "none";
          }, 2000);
      });
    });
  </script>
{% endblock %}
